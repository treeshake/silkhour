(()=>{"use strict";let t={};function i(i,e){return void 0===t[i]&&(t[i]=[]),t[i]=[...t[i],e],function(){t[i]=t[i].filter((t=>t!==e))}}class e extends HTMLElement{constructor(){super(),this.cartUpdateUnsubscriber=void 0,this.variantChangeUnsubscriber=void 0,this.input=this.querySelector(".quantity__input"),this.currentVariant=this.querySelector(".product-variant-id"),this.submitButton=this.querySelector('[type="submit"]'),console.log(this)}connectedCallback(){console.log("Connected callback"),this.input&&(this.quantityForm=this.querySelector(".product-form__quantity"),this.quantityForm&&(this.setQuantityBoundries(),this.dataset.originalSection||(this.cartUpdateUnsubscriber=i("cart-update",this.fetchQuantityRules.bind(this))),this.variantChangeUnsubscriber=i("variant-change",(t=>{const i=this.dataset.originalSection?this.dataset.originalSection:this.dataset.section;t.data.sectionId===i&&(this.updateQuantityRules(t.data.sectionId,t.data.html),this.setQuantityBoundries())}))))}disconnectedCallback(){this.cartUpdateUnsubscriber&&this.cartUpdateUnsubscriber(),this.variantChangeUnsubscriber&&this.variantChangeUnsubscriber()}setQuantityBoundries(){var i,e,n,a,s;const r={cartQuantity:(null===(i=this.input)||void 0===i?void 0:i.dataset.cartQuantity)?parseInt(this.input.dataset.cartQuantity):0,min:(null===(e=this.input)||void 0===e?void 0:e.dataset.min)?parseInt(this.input.dataset.min):1,max:(null===(n=this.input)||void 0===n?void 0:n.dataset.max)?parseInt(this.input.dataset.max):null,step:(null===(a=this.input)||void 0===a?void 0:a.step)?parseInt(this.input.step):1};let u=r.min;const o=null===r.max?r.max:r.max-r.cartQuantity;var c;null!==o&&(u=Math.min(u,o)),r.cartQuantity>=r.min&&(u=Math.min(u,r.step)),this.input.min=u,o?this.input.max=o:null===(s=this.input)||void 0===s||s.removeAttribute("max"),this.input.value=u,t[c="quantity-update"]&&t[c].forEach((t=>{t(void 0)}))}fetchQuantityRules(){var t;this.currentVariant&&this.currentVariant.value&&(null===(t=this.querySelector(".quantity__rules-cart .loading__spinner"))||void 0===t||t.classList.remove("hidden"),fetch(`${this.dataset.url}?variant=${this.currentVariant.value}&section_id=${this.dataset.section}`).then((t=>t.text())).then((t=>{const i=(new DOMParser).parseFromString(t,"text/html");this.updateQuantityRules(this.dataset.section,i),this.setQuantityBoundries()})).catch((t=>{console.error(t)})).finally((()=>{var t;null===(t=this.querySelector(".quantity__rules-cart .loading__spinner"))||void 0===t||t.classList.add("hidden")})))}updateQuantityRules(t,i){var e;const n=i.getElementById(`Quantity-Form-${t}`),a=[".quantity__input",".quantity__rules",".quantity__label"];for(let t of a){const i=null===(e=this.quantityForm)||void 0===e?void 0:e.querySelector(t),a=n.querySelector(t);if(i&&a)if(".quantity__input"===t){const t=["data-cart-quantity","data-min","data-max","step"];for(let e of t){const t=a.getAttribute(e);null!==t?i.setAttribute(e,t):i.removeAttribute(e)}}else i.innerHTML=a.innerHTML}}}customElements.get("custom-product-info")||customElements.define("custom-product-info",e),console.log(customElements)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JBQW9CNUIsS0FBS1UsUUFBUU0sV0FFbkZrQixNQUFNQyxHQUNFQSxFQUFTQyxTQUVqQkYsTUFBTUcsSUFDTCxNQUFNbEIsR0FBTyxJQUFJbUIsV0FBWUMsZ0JBQWdCRixFQUFjLGFBQzNEckMsS0FBS2tCLG9CQUFvQmxCLEtBQUtVLFFBQVFNLFFBQVNHLEdBQy9DbkIsS0FBS1Msc0JBQXNCLElBRTVCK0IsT0FBT0MsSUFDTnBDLFFBQVFxQyxNQUFNRCxFQUFFLElBRWpCRSxTQUFRLEssTUFHTixRQUZELEVBQUEzQyxLQUFLRSxjQUNILGtEQUNELFNBQUU0QixVQUFVYyxJQUFJLFNBQVMsSUFFaEMsQ0FFQSxtQkFBQTFCLENBQW9CSCxFQUFnQkksRyxNQUNsQyxNQUFNMEIsRUFBc0IxQixFQUFLMkIsZUFDL0IsaUJBQWlCL0IsS0FFYmdDLEVBQVksQ0FDaEIsbUJBQ0EsbUJBQ0Esb0JBRUYsSUFBSyxJQUFJQyxLQUFZRCxFQUFXLENBQzlCLE1BQU1FLEVBQTJCLFFBQWpCLEVBQUFqRCxLQUFLUSxvQkFBWSxlQUFFTixjQUFjOEMsR0FDM0NFLEVBQVVMLEVBQW9CM0MsY0FBYzhDLEdBQ2xELEdBQUtDLEdBQVlDLEVBQ2pCLEdBQWlCLHFCQUFiRixFQUFpQyxDQUNuQyxNQUFNRyxFQUFhLENBQ2pCLHFCQUNBLFdBQ0EsV0FDQSxRQUVGLElBQUssSUFBSUMsS0FBYUQsRUFBWSxDQUNoQyxNQUFNRSxFQUFlSCxFQUFRSSxhQUFhRixHQUNyQixPQUFqQkMsRUFDRkosRUFBUU0sYUFBYUgsRUFBV0MsR0FFaENKLEVBQVF0QixnQkFBZ0J5QixFQUU1QixDQUNGLE1BQ0VILEVBQVFPLFVBQVlOLEVBQVFNLFNBRWhDLENBQ0YsRUVySUtDLGVBQWVDLElBQUksd0JBQ3RCRCxlQUFlRSxPQUFPLHNCQUF1QmpFLEdBRS9DVyxRQUFRQyxJQUFJbUQsZSIsInNvdXJjZXMiOlsid2VicGFjazovL2xhYi1jb25jaWVyZ2UvLi9zcmMvc2hvcGlmeS9wdWJzdWIudHMiLCJ3ZWJwYWNrOi8vbGFiLWNvbmNpZXJnZS8uL3NyYy9zaG9waWZ5L3Byb2R1Y3QtaW5mby50cyIsIndlYnBhY2s6Ly9sYWItY29uY2llcmdlLy4vc3JjL3Nob3BpZnkvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2xhYi1jb25jaWVyZ2UvLi9zcmMvc2hvcGlmeS9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgc3Vic2NyaWJlcnM6IGFueSA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gc3Vic2NyaWJlKFxuICBldmVudE5hbWU6IHN0cmluZyxcbiAgY2FsbGJhY2s6IChkYXRhOiB1bmtub3duKSA9PiB2b2lkLFxuKSB7XG4gIGlmIChzdWJzY3JpYmVyc1tldmVudE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW107XG4gIH1cblxuICBzdWJzY3JpYmVyc1tldmVudE5hbWVdID0gWy4uLnN1YnNjcmliZXJzW2V2ZW50TmFtZV0sIGNhbGxiYWNrXTtcblxuICByZXR1cm4gZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXSA9IHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uZmlsdGVyKChjYjogYW55KSA9PiB7XG4gICAgICByZXR1cm4gY2IgIT09IGNhbGxiYWNrO1xuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaChldmVudE5hbWU6IHN0cmluZywgZGF0YTogdW5rbm93bikge1xuICBpZiAoc3Vic2NyaWJlcnNbZXZlbnROYW1lXSkge1xuICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uZm9yRWFjaCgoY2FsbGJhY2s6IChkYXRhOiBhbnkpID0+IHZvaWQpID0+IHtcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQVUJfU1VCX0VWRU5UUyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IHB1Ymxpc2gsIHN1YnNjcmliZSB9IGZyb20gJy4vcHVic3ViJztcblxuZXhwb3J0IGNsYXNzIFByb2R1Y3RJbmZvIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBpbnB1dDogSFRNTEZvcm1FbGVtZW50IHwgbnVsbDtcbiAgY3VycmVudFZhcmlhbnQ6IEhUTUxGb3JtRWxlbWVudCB8IG51bGw7XG4gIHN1Ym1pdEJ1dHRvbjogSFRNTEZvcm1FbGVtZW50IHwgbnVsbDtcbiAgcXVhbnRpdHlGb3JtOiBIVE1MRm9ybUVsZW1lbnQgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcignLnF1YW50aXR5X19pbnB1dCcpO1xuICAgIHRoaXMuY3VycmVudFZhcmlhbnQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXZhcmlhbnQtaWQnKTtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMucXVlcnlTZWxlY3RvcignW3R5cGU9XCJzdWJtaXRcIl0nKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgfVxuXG4gIGNhcnRVcGRhdGVVbnN1YnNjcmliZXI/OiAoKSA9PiB2b2lkID0gdW5kZWZpbmVkO1xuICB2YXJpYW50Q2hhbmdlVW5zdWJzY3JpYmVyPzogKCkgPT4gdm9pZCA9IHVuZGVmaW5lZDtcblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25zb2xlLmxvZyhgQ29ubmVjdGVkIGNhbGxiYWNrYCk7XG4gICAgaWYgKCF0aGlzLmlucHV0KSByZXR1cm47XG4gICAgdGhpcy5xdWFudGl0eUZvcm0gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LWZvcm1fX3F1YW50aXR5Jyk7XG4gICAgaWYgKCF0aGlzLnF1YW50aXR5Rm9ybSkgcmV0dXJuO1xuICAgIHRoaXMuc2V0UXVhbnRpdHlCb3VuZHJpZXMoKTtcbiAgICBpZiAoIXRoaXMuZGF0YXNldC5vcmlnaW5hbFNlY3Rpb24pIHtcbiAgICAgIHRoaXMuY2FydFVwZGF0ZVVuc3Vic2NyaWJlciA9IHN1YnNjcmliZShcbiAgICAgICAgUFVCX1NVQl9FVkVOVFMuY2FydFVwZGF0ZSxcbiAgICAgICAgdGhpcy5mZXRjaFF1YW50aXR5UnVsZXMuYmluZCh0aGlzKSxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMudmFyaWFudENoYW5nZVVuc3Vic2NyaWJlciA9IHN1YnNjcmliZShcbiAgICAgIFBVQl9TVUJfRVZFTlRTLnZhcmlhbnRDaGFuZ2UsXG4gICAgICAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBzZWN0aW9uSWQgPSB0aGlzLmRhdGFzZXQub3JpZ2luYWxTZWN0aW9uXG4gICAgICAgICAgPyB0aGlzLmRhdGFzZXQub3JpZ2luYWxTZWN0aW9uXG4gICAgICAgICAgOiB0aGlzLmRhdGFzZXQuc2VjdGlvbjtcbiAgICAgICAgaWYgKGV2ZW50LmRhdGEuc2VjdGlvbklkICE9PSBzZWN0aW9uSWQpIHJldHVybjtcbiAgICAgICAgdGhpcy51cGRhdGVRdWFudGl0eVJ1bGVzKGV2ZW50LmRhdGEuc2VjdGlvbklkLCBldmVudC5kYXRhLmh0bWwpO1xuICAgICAgICB0aGlzLnNldFF1YW50aXR5Qm91bmRyaWVzKCk7XG4gICAgICB9LFxuICAgICk7XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBpZiAodGhpcy5jYXJ0VXBkYXRlVW5zdWJzY3JpYmVyKSB7XG4gICAgICB0aGlzLmNhcnRVcGRhdGVVbnN1YnNjcmliZXIoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudmFyaWFudENoYW5nZVVuc3Vic2NyaWJlcikge1xuICAgICAgdGhpcy52YXJpYW50Q2hhbmdlVW5zdWJzY3JpYmVyKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0UXVhbnRpdHlCb3VuZHJpZXMoKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNhcnRRdWFudGl0eTogdGhpcy5pbnB1dD8uZGF0YXNldC5jYXJ0UXVhbnRpdHlcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLmlucHV0LmRhdGFzZXQuY2FydFF1YW50aXR5KVxuICAgICAgICA6IDAsXG4gICAgICBtaW46IHRoaXMuaW5wdXQ/LmRhdGFzZXQubWluID8gcGFyc2VJbnQodGhpcy5pbnB1dC5kYXRhc2V0Lm1pbikgOiAxLFxuICAgICAgbWF4OiB0aGlzLmlucHV0Py5kYXRhc2V0Lm1heCA/IHBhcnNlSW50KHRoaXMuaW5wdXQuZGF0YXNldC5tYXgpIDogbnVsbCxcbiAgICAgIHN0ZXA6IHRoaXMuaW5wdXQ/LnN0ZXAgPyBwYXJzZUludCh0aGlzLmlucHV0LnN0ZXApIDogMSxcbiAgICB9O1xuXG4gICAgbGV0IG1pbiA9IGRhdGEubWluO1xuICAgIGNvbnN0IG1heCA9IGRhdGEubWF4ID09PSBudWxsID8gZGF0YS5tYXggOiBkYXRhLm1heCAtIGRhdGEuY2FydFF1YW50aXR5O1xuICAgIGlmIChtYXggIT09IG51bGwpIG1pbiA9IE1hdGgubWluKG1pbiwgbWF4KTtcbiAgICBpZiAoZGF0YS5jYXJ0UXVhbnRpdHkgPj0gZGF0YS5taW4pIG1pbiA9IE1hdGgubWluKG1pbiwgZGF0YS5zdGVwKTtcbiAgICB0aGlzLmlucHV0IS5taW4gPSBtaW47XG5cbiAgICBpZiAobWF4KSB7XG4gICAgICB0aGlzLmlucHV0IS5tYXggPSBtYXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5wdXQ/LnJlbW92ZUF0dHJpYnV0ZSgnbWF4Jyk7XG4gICAgfVxuICAgIHRoaXMuaW5wdXQhLnZhbHVlID0gbWluO1xuICAgIHB1Ymxpc2goUFVCX1NVQl9FVkVOVFMucXVhbnRpdHlVcGRhdGUsIHVuZGVmaW5lZCk7XG4gIH1cblxuICBmZXRjaFF1YW50aXR5UnVsZXMoKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRWYXJpYW50IHx8ICF0aGlzLmN1cnJlbnRWYXJpYW50LnZhbHVlKSByZXR1cm47XG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5xdWFudGl0eV9fcnVsZXMtY2FydCAubG9hZGluZ19fc3Bpbm5lcicsXG4gICAgKT8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgZmV0Y2goXG4gICAgICBgJHt0aGlzLmRhdGFzZXQudXJsfT92YXJpYW50PSR7dGhpcy5jdXJyZW50VmFyaWFudC52YWx1ZX0mc2VjdGlvbl9pZD0ke3RoaXMuZGF0YXNldC5zZWN0aW9ufWAsXG4gICAgKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlVGV4dCkgPT4ge1xuICAgICAgICBjb25zdCBodG1sID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhyZXNwb25zZVRleHQsICd0ZXh0L2h0bWwnKTtcbiAgICAgICAgdGhpcy51cGRhdGVRdWFudGl0eVJ1bGVzKHRoaXMuZGF0YXNldC5zZWN0aW9uLCBodG1sKTtcbiAgICAgICAgdGhpcy5zZXRRdWFudGl0eUJvdW5kcmllcygpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICcucXVhbnRpdHlfX3J1bGVzLWNhcnQgLmxvYWRpbmdfX3NwaW5uZXInLFxuICAgICAgICApPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlUXVhbnRpdHlSdWxlcyhzZWN0aW9uSWQ6IGFueSwgaHRtbDogYW55KSB7XG4gICAgY29uc3QgcXVhbnRpdHlGb3JtVXBkYXRlZCA9IGh0bWwuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBgUXVhbnRpdHktRm9ybS0ke3NlY3Rpb25JZH1gLFxuICAgICk7XG4gICAgY29uc3Qgc2VsZWN0b3JzID0gW1xuICAgICAgJy5xdWFudGl0eV9faW5wdXQnLFxuICAgICAgJy5xdWFudGl0eV9fcnVsZXMnLFxuICAgICAgJy5xdWFudGl0eV9fbGFiZWwnLFxuICAgIF07XG4gICAgZm9yIChsZXQgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5xdWFudGl0eUZvcm0/LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgY29uc3QgdXBkYXRlZCA9IHF1YW50aXR5Rm9ybVVwZGF0ZWQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICBpZiAoIWN1cnJlbnQgfHwgIXVwZGF0ZWQpIGNvbnRpbnVlO1xuICAgICAgaWYgKHNlbGVjdG9yID09PSAnLnF1YW50aXR5X19pbnB1dCcpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IFtcbiAgICAgICAgICAnZGF0YS1jYXJ0LXF1YW50aXR5JyxcbiAgICAgICAgICAnZGF0YS1taW4nLFxuICAgICAgICAgICdkYXRhLW1heCcsXG4gICAgICAgICAgJ3N0ZXAnLFxuICAgICAgICBdO1xuICAgICAgICBmb3IgKGxldCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xuICAgICAgICAgIGNvbnN0IHZhbHVlVXBkYXRlZCA9IHVwZGF0ZWQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICAgICAgaWYgKHZhbHVlVXBkYXRlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY3VycmVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZVVwZGF0ZWQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudC5pbm5lckhUTUwgPSB1cGRhdGVkLmlubmVySFRNTDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBPTl9DSEFOR0VfREVCT1VOQ0VfVElNRVIgPSAzMDA7XG5cbmV4cG9ydCBjb25zdCBQVUJfU1VCX0VWRU5UUyA9IHtcbiAgY2FydFVwZGF0ZTogJ2NhcnQtdXBkYXRlJyxcbiAgcXVhbnRpdHlVcGRhdGU6ICdxdWFudGl0eS11cGRhdGUnLFxuICB2YXJpYW50Q2hhbmdlOiAndmFyaWFudC1jaGFuZ2UnLFxuICBjYXJ0RXJyb3I6ICdjYXJ0LWVycm9yJyxcbn07XG4iLCJpbXBvcnQgeyBQcm9kdWN0SW5mbyB9IGZyb20gJy4vcHJvZHVjdC1pbmZvJztcblxuXG5mdW5jdGlvbiBtYWluKCkge1xuICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCgnY3VzdG9tLXByb2R1Y3QtaW5mbycpKSB7XG4gICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdjdXN0b20tcHJvZHVjdC1pbmZvJywgUHJvZHVjdEluZm8pO1xuICB9XG4gIGNvbnNvbGUubG9nKGN1c3RvbUVsZW1lbnRzKTtcbn1cblxubWFpbigpOyJdLCJuYW1lcyI6WyJzdWJzY3JpYmVycyIsInN1YnNjcmliZSIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiZmlsdGVyIiwiY2IiLCJQcm9kdWN0SW5mbyIsIkhUTUxFbGVtZW50IiwiY29uc3RydWN0b3IiLCJzdXBlciIsImNhcnRVcGRhdGVVbnN1YnNjcmliZXIiLCJ2YXJpYW50Q2hhbmdlVW5zdWJzY3JpYmVyIiwidGhpcyIsImlucHV0IiwicXVlcnlTZWxlY3RvciIsImN1cnJlbnRWYXJpYW50Iiwic3VibWl0QnV0dG9uIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3RlZENhbGxiYWNrIiwicXVhbnRpdHlGb3JtIiwic2V0UXVhbnRpdHlCb3VuZHJpZXMiLCJkYXRhc2V0Iiwib3JpZ2luYWxTZWN0aW9uIiwiZmV0Y2hRdWFudGl0eVJ1bGVzIiwiYmluZCIsImV2ZW50Iiwic2VjdGlvbklkIiwic2VjdGlvbiIsImRhdGEiLCJ1cGRhdGVRdWFudGl0eVJ1bGVzIiwiaHRtbCIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwiY2FydFF1YW50aXR5IiwicGFyc2VJbnQiLCJtaW4iLCJtYXgiLCJzdGVwIiwiTWF0aCIsInJlbW92ZUF0dHJpYnV0ZSIsInZhbHVlIiwiZm9yRWFjaCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImZldGNoIiwidXJsIiwidGhlbiIsInJlc3BvbnNlIiwidGV4dCIsInJlc3BvbnNlVGV4dCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImNhdGNoIiwiZSIsImVycm9yIiwiZmluYWxseSIsImFkZCIsInF1YW50aXR5Rm9ybVVwZGF0ZWQiLCJnZXRFbGVtZW50QnlJZCIsInNlbGVjdG9ycyIsInNlbGVjdG9yIiwiY3VycmVudCIsInVwZGF0ZWQiLCJhdHRyaWJ1dGVzIiwiYXR0cmlidXRlIiwidmFsdWVVcGRhdGVkIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiaW5uZXJIVE1MIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJkZWZpbmUiXSwic291cmNlUm9vdCI6IiJ9