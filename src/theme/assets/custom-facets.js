(()=>{"use strict";class e extends HTMLElement{constructor(){super(),this.onActiveFilterClick=this.onActiveFilterClick.bind(this),this.debouncedOnSubmit=debounce((e=>{this.onSubmitHandler(e)}),800);const e=this.querySelector("form");null==e||e.addEventListener("input",this.debouncedOnSubmit.bind(this));const t=this.querySelector("#FacetsWrapperDesktop");t&&t.addEventListener("keyup",onKeyUpEscape)}static setListeners(){window.addEventListener("popstate",(t=>{const r=t.state?t.state.searchParams:e.searchParamsInitial;r!==e.searchParamsPrev&&e.renderPage(r,null,!1)}))}static toggleActiveFacets(e=!0){document.querySelectorAll(".js-facet-remove").forEach((t=>{t.classList.toggle("disabled",e)}))}static renderPage(t,r,n=!0){e.searchParamsPrev=t;const i=e.getSections(),o=(document.getElementById("ProductCount"),document.getElementById("ProductCountDesktop"),document.getElementById("ProductGridContainer")),s=null==o?void 0:o.querySelector(".collection");s&&s.classList.add("loading"),i.forEach((n=>{const i=`${window.location.pathname}?section_id=${n.section}&${t}`,o=e=>e.url===i;e.filterData.some(o)?e.renderSectionFromCache(o,r):e.renderSectionFromFetch(i,r)})),n&&e.updateURLHash(t)}static renderSectionFromFetch(t,r){fetch(t).then((e=>e.text())).then((n=>{const i=n;e.filterData=[...e.filterData,{html:i,url:t}],e.renderFilters(i,r),e.renderProductGridContainer(i),e.renderProductCount(i),"function"==typeof initializeScrollAnimationTrigger&&initializeScrollAnimationTrigger(i.innerHTML)}))}static renderSectionFromCache(t,r){const n=e.filterData.find(t).html;e.renderFilters(n,r),e.renderProductGridContainer(n),e.renderProductCount(n),"function"==typeof initializeScrollAnimationTrigger&&initializeScrollAnimationTrigger(n.innerHTML)}static renderProductGridContainer(e){const t=document.getElementById("ProductGridContainer");if(t){const r=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductGridContainer");r&&(t.innerHTML=r.innerHTML,t.querySelectorAll(".scroll-trigger").forEach((e=>{e.classList.add("scroll-trigger--cancel")})))}document.querySelectorAll(".custom_cllection_main .product_list").forEach((e=>{e.addEventListener("click",(function(){const t=this.closest(".product_list_main").querySelector(".product_list_content");e.classList.contains("opened")?(t.style.display="none",e.classList.remove("opened")):(t.style.display="block",e.classList.add("opened"))}))}))}static renderProductCount(e){const t=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductCount"),r=t?t.innerHTML:"",n=document.getElementById("ProductCount"),i=document.getElementById("ProductCountDesktop");n&&(n.innerHTML=r,n.classList.remove("loading")),i&&(i.innerHTML=r,i.classList.remove("loading")),document.querySelectorAll(".facets-container .loading__spinner, custom-facet-filters-form .loading__spinner").forEach((e=>e.classList.add("hidden")))}static renderFilters(t,r){const n=(new DOMParser).parseFromString(t,"text/html"),i=n.querySelectorAll("#FacetFiltersForm .js-filter, #FacetFiltersFormMobile .js-filter, #FacetFiltersPillsForm .js-filter"),o=document.querySelectorAll("#FacetFiltersForm .js-filter, #FacetFiltersFormMobile .js-filter, #FacetFiltersPillsForm .js-filter");Array.from(o).forEach((e=>{Array.from(i).some((({id:t})=>e.id===t))||e.remove()}));const s=e=>{const t=r?r.target.closest(".js-filter"):void 0;return!!t&&e.id===t.id},c=Array.from(i).filter((e=>!s(e))),a=Array.from(i).find(s);if(c.forEach(((e,t)=>{if(document.getElementById(e.id)){const t=document.getElementById(e.id);t&&(t.innerHTML=e.innerHTML)}else{if(t>0){const{className:r,id:n}=c[t-1];if(e.className===r){const t=document.getElementById(n);return void(t&&t.after(e))}}if(e.parentElement){const t=document.querySelector(`#${e.parentElement.id} .js-filter`);t&&t.before(e)}}})),e.renderActiveFacets(n),e.renderAdditionalElements(n),a){const t=r.target.closest(".js-filter").id;if(t){e.renderCounts(a,r.target.closest(".js-filter")),e.renderMobileCounts(a,document.getElementById(t));const n=document.getElementById(t),i=(null==n?void 0:n.classList.contains("mobile-facets__details"))?".mobile-facets__close-button":".facets__summary",o=null==n?void 0:n.querySelector(i),s="text"===r.target.getAttribute("type");o&&!s&&o.focus()}}}static renderActiveFacets(t){[".active-facets-mobile",".active-facets-desktop"].forEach((e=>{const r=t.querySelector(e);if(!r)return;const n=document.querySelector(e);n&&(n.innerHTML=r.innerHTML)})),e.toggleActiveFacets(!1)}static renderAdditionalElements(e){var t;[".mobile-facets__open",".mobile-facets__count",".sorting"].forEach((t=>{const r=document.querySelector(t),n=e.querySelector(t);r&&n&&(r.innerHTML=n.innerHTML)}));const r=null===(t=document.getElementById("FacetFiltersFormMobile"))||void 0===t?void 0:t.closest("menu-drawer");null==r||r.bindEvents()}static renderCounts(e,t){const r=t.querySelector(".facets__summary"),n=e.querySelector(".facets__summary");n&&r&&(r.outerHTML=n.outerHTML);const i=t.querySelector(".facets__header"),o=e.querySelector(".facets__header");o&&i&&(i.outerHTML=o.outerHTML);const s=t.querySelector(".facets-wrap"),c=e.querySelector(".facets-wrap");c&&s&&(Boolean(t.querySelector("show-more-button .label-show-more.hidden"))&&c.querySelectorAll(".facets__item.hidden").forEach((e=>e.classList.replace("hidden","show-more-item"))),s.outerHTML=c.outerHTML)}static renderMobileCounts(e,t){const r=t.querySelector(".mobile-facets__list"),n=e.querySelector(".mobile-facets__list");n&&r&&(r.outerHTML=n.outerHTML)}static updateURLHash(e){history.pushState({searchParams:e},"",`${window.location.pathname}${e&&"?".concat(e)}`)}static getSections(){var e;return[{section:null===(e=document.getElementById("product-grid"))||void 0===e?void 0:e.dataset.id}]}createSearchParams(e){const t=new FormData(e);return new URLSearchParams(t).toString()}onSubmitForm(t,r){e.renderPage(t,r)}onSubmitHandler(e){e.preventDefault();const t=document.querySelectorAll("custom-facet-filters-form form");if("mobile-facets__checkbox"==e.srcElement.className){const t=this.createSearchParams(e.target.closest("form"));this.onSubmitForm(t,e)}else{const r=[],n="FacetFiltersFormMobile"===e.target.closest("form").id;t.forEach((e=>{n?"FacetFiltersFormMobile"===e.id&&r.push(this.createSearchParams(e)):"FacetSortForm"!==e.id&&"FacetFiltersForm"!==e.id&&"FacetSortDrawerForm"!==e.id||r.push(this.createSearchParams(e))})),this.onSubmitForm(r.join("&"),e)}}onActiveFilterClick(t){t.preventDefault(),e.toggleActiveFacets();const r=-1==t.currentTarget.href.indexOf("?")?"":t.currentTarget.href.slice(t.currentTarget.href.indexOf("?")+1);e.renderPage(r)}}e.filterData=[];class t extends HTMLElement{constructor(){super();const e=document.querySelectorAll('.price_rang_slider input[type="range"]'),t=e[0],r=e[1];function n(e,t="$"){return`${t}${(e/100).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function i(){var e,n;null===(e=document.querySelector(".facets__price .input_min"))||void 0===e||e.setAttribute("value",t.value),null===(n=document.querySelector(".facets__price .input_max"))||void 0===n||n.setAttribute("value",r.value)}t.addEventListener("input",(function(){var e,t;this.value=Math.min(this.value,r.value-10).toString(),null===(t=null===(e=this.closest(".facets__display-vertical"))||void 0===e?void 0:e.querySelector(".price_min_text"))||void 0===t||(t.innerHTML=n(100*Number(this.value))),i()})),r.addEventListener("input",(function(){var e,r;this.value=Math.max(this.value,Number(t.value)- -10).toString(),null===(r=null===(e=this.closest(".facets__display-vertical"))||void 0===e?void 0:e.querySelector(".price_max_text"))||void 0===r||(r.innerHTML=n(100*Number(this.value))),i()})),i(),this.querySelectorAll("input").forEach((e=>{e.addEventListener("change",this.onRangeChange.bind(this)),e.addEventListener("keydown",this.onKeyDown.bind(this))})),this.setMinAndMaxValues()}onRangeChange(e){this.adjustToValidValues(e.currentTarget),this.setMinAndMaxValues()}onKeyDown(e){e.metaKey||e.key.match(/[0-9]|\.|,|'| |Tab|Backspace|Enter|ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Delete|Escape/)||e.preventDefault()}setMinAndMaxValues(){const e=this.querySelectorAll("input"),t=e[0],r=e[1];r.value&&t.setAttribute("data-max",r.value),t.value&&r.setAttribute("data-min",t.value),""===t.value&&r.setAttribute("data-min","0"),""===r.value&&t.setAttribute("data-max",t.getAttribute("data-max")||"")}adjustToValidValues(e){const t=Number(e.value),r=Number(e.getAttribute("data-min")),n=Number(e.getAttribute("data-max"));t<r&&(e.value=r.toString()),t>n&&(e.value=n.toString())}}class r extends HTMLElement{constructor(){super();const e=this.querySelector("a");null==e||e.setAttribute("role","button"),null==e||e.addEventListener("click",this.closeFilter.bind(this)),null==e||e.addEventListener("keyup",(e=>{e.preventDefault(),"SPACE"===e.code.toUpperCase()&&this.closeFilter(e)}))}closeFilter(e){e.preventDefault();const t=this.closest("custom-facet-filters-form")||document.querySelector("custom-facet-filters-form");t&&t.onActiveFilterClick(e)}}FacetFiltersForm.filterData=[],FacetFiltersForm.searchParamsInitial=window.location.search.slice(1),FacetFiltersForm.searchParamsPrev=window.location.search.slice(1),customElements.define("custom-facet-filters-form",e),e.setListeners(),customElements.define("custom-price-range",t),customElements.define("custom-facet-remove",r)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLYSxFQUFNZixNQUFRRSxFQUFJM0IsWUFDL0J5QixFQUFRSSxJQUFLVyxFQUFNZixNQUFRSSxFQUFJN0IsV0FDckMsRUN6RkssTUFBTXlDLFVBQW9CakwsWUFDL0IsV0FBQUMsR0FDRUMsUUFDQSxNQUFNZ0wsRUFBWS9LLEtBQUtRLGNBQWMsS0FDckN1SyxTQUFBQSxFQUFXbEIsYUFBYSxPQUFRLFVBQ2hDa0IsU0FBQUEsRUFBV3RLLGlCQUFpQixRQUFTVCxLQUFLZ0wsWUFBWTlLLEtBQUtGLE9BQzNEK0ssU0FBQUEsRUFBV3RLLGlCQUFpQixTQUFVSixJQUNwQ0EsRUFBTWtJLGlCQUMyQixVQUE3QmxJLEVBQU00SyxLQUFLQyxlQUEyQmxMLEtBQUtnTCxZQUFZM0ssRUFBTSxHQUVyRSxDQUVBLFdBQUEySyxDQUFZM0ssR0FDVkEsRUFBTWtJLGlCQUNOLE1BQU1OLEVBQ0pqSSxLQUFLNEQsUUFBUSw4QkFDYnZDLFNBQVNiLGNBQWMsNkJBQ3JCeUgsR0FDREEsRUFBYWhJLG9CQUFvQkksRUFFdEMsRUNqQkY4SyxpQkFBaUI1SSxXQUFhLEdBQzlCNEksaUJBQWlCbkssb0JBQXNCSCxPQUFPdUIsU0FBU2dKLE9BQU9uQyxNQUFNLEdBQ3BFa0MsaUJBQWlCbEssaUJBQW1CSixPQUFPdUIsU0FBU2dKLE9BQU9uQyxNQUFNLEdBQ2pFb0MsZUFBZUMsT0FBTyw0QkFBNkIsR0FDbkQsRUFBdUIxSyxlQUV2QnlLLGVBQWVDLE9BQU8scUJBQXNCLEdBQzVDRCxlQUFlQyxPQUFPLHNCQUF1QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGFiLWNvbmNpZXJnZS8uL3NyYy90cy9mYWNldHMvRmFjZXRGaWx0ZXJzRm9ybS50cyIsIndlYnBhY2s6Ly9sYWItY29uY2llcmdlLy4vc3JjL3RzL2ZhY2V0cy9QcmljZVJhbmdlLnRzIiwid2VicGFjazovL2xhYi1jb25jaWVyZ2UvLi9zcmMvdHMvZmFjZXRzL0ZhY2V0UmVtb3ZlLnRzIiwid2VicGFjazovL2xhYi1jb25jaWVyZ2UvLi9zcmMvdHMvZmFjZXRzL2ZhY2V0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFkYXB0ZWQgZnJvbSBmYWNldHMuanNcbiAqL1xuZXhwb3J0IGNsYXNzIEZhY2V0RmlsdGVyc0Zvcm0gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGRlYm91bmNlZE9uU3VibWl0OiAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG4gIHN0YXRpYyBmaWx0ZXJEYXRhOiBhbnlbXSA9IFtdO1xuICBzdGF0aWMgc2VhcmNoUGFyYW1zSW5pdGlhbDogc3RyaW5nO1xuICBzdGF0aWMgc2VhcmNoUGFyYW1zUHJldjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5vbkFjdGl2ZUZpbHRlckNsaWNrID0gdGhpcy5vbkFjdGl2ZUZpbHRlckNsaWNrLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmRlYm91bmNlZE9uU3VibWl0ID0gZGVib3VuY2UoKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgIHRoaXMub25TdWJtaXRIYW5kbGVyKGV2ZW50KTtcbiAgICB9LCA4MDApO1xuXG4gICAgY29uc3QgZmFjZXRGb3JtID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgZmFjZXRGb3JtPy5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuZGVib3VuY2VkT25TdWJtaXQuYmluZCh0aGlzKSk7XG5cbiAgICBjb25zdCBmYWNldFdyYXBwZXIgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNGYWNldHNXcmFwcGVyRGVza3RvcCcpO1xuICAgIGlmIChmYWNldFdyYXBwZXIpIGZhY2V0V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uS2V5VXBFc2NhcGUpO1xuICB9XG5cbiAgc3RhdGljIHNldExpc3RlbmVycygpIHtcbiAgICBjb25zdCBvbkhpc3RvcnlDaGFuZ2UgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gZXZlbnQuc3RhdGVcbiAgICAgICAgPyBldmVudC5zdGF0ZS5zZWFyY2hQYXJhbXNcbiAgICAgICAgOiBGYWNldEZpbHRlcnNGb3JtLnNlYXJjaFBhcmFtc0luaXRpYWw7XG4gICAgICBpZiAoc2VhcmNoUGFyYW1zID09PSBGYWNldEZpbHRlcnNGb3JtLnNlYXJjaFBhcmFtc1ByZXYpIHJldHVybjtcbiAgICAgIEZhY2V0RmlsdGVyc0Zvcm0ucmVuZGVyUGFnZShzZWFyY2hQYXJhbXMsIG51bGwsIGZhbHNlKTtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIG9uSGlzdG9yeUNoYW5nZSk7XG4gIH1cblxuICBzdGF0aWMgdG9nZ2xlQWN0aXZlRmFjZXRzKGRpc2FibGUgPSB0cnVlKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWZhY2V0LXJlbW92ZScpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnLCBkaXNhYmxlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJQYWdlKHNlYXJjaFBhcmFtczogYW55LCBldmVudD86IGFueSwgdXBkYXRlVVJMSGFzaCA9IHRydWUpIHtcbiAgICBGYWNldEZpbHRlcnNGb3JtLnNlYXJjaFBhcmFtc1ByZXYgPSBzZWFyY2hQYXJhbXM7XG4gICAgY29uc3Qgc2VjdGlvbnMgPSBGYWNldEZpbHRlcnNGb3JtLmdldFNlY3Rpb25zKCk7XG4gICAgY29uc3QgY291bnRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnUHJvZHVjdENvdW50Jyk7XG4gICAgY29uc3QgY291bnRDb250YWluZXJEZXNrdG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAnUHJvZHVjdENvdW50RGVza3RvcCcsXG4gICAgKTtcbiAgICBjb25zdCBwcm9kdWN0R3JpZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ1Byb2R1Y3RHcmlkQ29udGFpbmVyJyxcbiAgICApO1xuICAgIGNvbnN0IGNvbGxlY3Rpb25FbGVtZW50ID1cbiAgICAgIHByb2R1Y3RHcmlkQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbicpO1xuICAgIGlmIChjb2xsZWN0aW9uRWxlbWVudCkge1xuICAgICAgY29sbGVjdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpO1xuICAgIH1cblxuICAgIHNlY3Rpb25zLmZvckVhY2goKHNlY3Rpb24pID0+IHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX0/c2VjdGlvbl9pZD0ke3NlY3Rpb24uc2VjdGlvbn0mJHtzZWFyY2hQYXJhbXN9YDtcbiAgICAgIGNvbnN0IGZpbHRlckRhdGFVcmwgPSAoZWxlbWVudDogYW55KSA9PiBlbGVtZW50LnVybCA9PT0gdXJsO1xuXG4gICAgICBGYWNldEZpbHRlcnNGb3JtLmZpbHRlckRhdGEuc29tZShmaWx0ZXJEYXRhVXJsKVxuICAgICAgICA/IEZhY2V0RmlsdGVyc0Zvcm0ucmVuZGVyU2VjdGlvbkZyb21DYWNoZShmaWx0ZXJEYXRhVXJsLCBldmVudClcbiAgICAgICAgOiBGYWNldEZpbHRlcnNGb3JtLnJlbmRlclNlY3Rpb25Gcm9tRmV0Y2godXJsLCBldmVudCk7XG4gICAgfSk7XG5cbiAgICBpZiAodXBkYXRlVVJMSGFzaCkgRmFjZXRGaWx0ZXJzRm9ybS51cGRhdGVVUkxIYXNoKHNlYXJjaFBhcmFtcyk7XG4gIH1cblxuICBzdGF0aWMgcmVuZGVyU2VjdGlvbkZyb21GZXRjaCh1cmw6IGFueSwgZXZlbnQ6IGFueSkge1xuICAgIGZldGNoKHVybClcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlVGV4dCkgPT4ge1xuICAgICAgICBjb25zdCBodG1sID0gcmVzcG9uc2VUZXh0O1xuICAgICAgICBGYWNldEZpbHRlcnNGb3JtLmZpbHRlckRhdGEgPSBbIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAuLi5GYWNldEZpbHRlcnNGb3JtLmZpbHRlckRhdGEsIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICB7IGh0bWwsIHVybCB9LFxuICAgICAgICBdO1xuICAgICAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlckZpbHRlcnMoaHRtbCwgZXZlbnQpO1xuICAgICAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlclByb2R1Y3RHcmlkQ29udGFpbmVyKGh0bWwpO1xuICAgICAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlclByb2R1Y3RDb3VudChodG1sKTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsaXplU2Nyb2xsQW5pbWF0aW9uVHJpZ2dlciA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgaW5pdGlhbGl6ZVNjcm9sbEFuaW1hdGlvblRyaWdnZXIoaHRtbC5pbm5lckhUTUwpO1xuICAgICAgfSk7XG4gIH1cblxuICBzdGF0aWMgcmVuZGVyU2VjdGlvbkZyb21DYWNoZShmaWx0ZXJEYXRhVXJsOiBhbnksIGV2ZW50OiBhbnkpIHtcbiAgICBjb25zdCBodG1sID0gRmFjZXRGaWx0ZXJzRm9ybS5maWx0ZXJEYXRhLmZpbmQoZmlsdGVyRGF0YVVybCkuaHRtbDtcbiAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlckZpbHRlcnMoaHRtbCwgZXZlbnQpO1xuICAgIEZhY2V0RmlsdGVyc0Zvcm0ucmVuZGVyUHJvZHVjdEdyaWRDb250YWluZXIoaHRtbCk7XG4gICAgRmFjZXRGaWx0ZXJzRm9ybS5yZW5kZXJQcm9kdWN0Q291bnQoaHRtbCk7XG4gICAgaWYgKHR5cGVvZiBpbml0aWFsaXplU2Nyb2xsQW5pbWF0aW9uVHJpZ2dlciA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIGluaXRpYWxpemVTY3JvbGxBbmltYXRpb25UcmlnZ2VyKGh0bWwuaW5uZXJIVE1MKTtcbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJQcm9kdWN0R3JpZENvbnRhaW5lcihodG1sOiBhbnkpIHtcbiAgICBjb25zdCBwcm9kdWN0R3JpZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ1Byb2R1Y3RHcmlkQ29udGFpbmVyJyxcbiAgICApO1xuICAgIGlmIChwcm9kdWN0R3JpZENvbnRhaW5lcikge1xuICAgICAgY29uc3QgZ3JpZENvbnRhaW5lciA9IG5ldyBET01QYXJzZXIoKVxuICAgICAgICAucGFyc2VGcm9tU3RyaW5nKGh0bWwsICd0ZXh0L2h0bWwnKVxuICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoJ1Byb2R1Y3RHcmlkQ29udGFpbmVyJyk7XG4gICAgICBpZiAoZ3JpZENvbnRhaW5lcikge1xuICAgICAgICBwcm9kdWN0R3JpZENvbnRhaW5lci5pbm5lckhUTUwgPSBncmlkQ29udGFpbmVyLmlubmVySFRNTDtcblxuICAgICAgICBwcm9kdWN0R3JpZENvbnRhaW5lclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcuc2Nyb2xsLXRyaWdnZXInKVxuICAgICAgICAgIC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Njcm9sbC10cmlnZ2VyLS1jYW5jZWwnKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdXN0b21fY2xsZWN0aW9uX21haW4gLnByb2R1Y3RfbGlzdCcpXG4gICAgICAuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKHRoaXM6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgY29uc3QgcHJvZHVjdE1haW4gPSB0aGlzLmNsb3Nlc3QoJy5wcm9kdWN0X2xpc3RfbWFpbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IHByb2R1Y3RDb250ZW50ID0gcHJvZHVjdE1haW4ucXVlcnlTZWxlY3RvcignLnByb2R1Y3RfbGlzdF9jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuZWQnKSkge1xuICAgICAgICAgICAgcHJvZHVjdENvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2R1Y3RDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdvcGVuZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICBzdGF0aWMgcmVuZGVyUHJvZHVjdENvdW50KGh0bWw6IGFueSkge1xuICAgIGNvbnN0IGNvdW50RWxlbWVudCA9IG5ldyBET01QYXJzZXIoKVxuICAgICAgLnBhcnNlRnJvbVN0cmluZyhodG1sLCAndGV4dC9odG1sJylcbiAgICAgIC5nZXRFbGVtZW50QnlJZCgnUHJvZHVjdENvdW50Jyk7XG4gICAgY29uc3QgY291bnQgPSBjb3VudEVsZW1lbnQgPyBjb3VudEVsZW1lbnQuaW5uZXJIVE1MIDogJyc7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1Byb2R1Y3RDb3VudCcpO1xuICAgIGNvbnN0IGNvbnRhaW5lckRlc2t0b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnUHJvZHVjdENvdW50RGVza3RvcCcpO1xuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBjb3VudDtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7XG4gICAgfVxuICAgIGlmIChjb250YWluZXJEZXNrdG9wKSB7XG4gICAgICBjb250YWluZXJEZXNrdG9wLmlubmVySFRNTCA9IGNvdW50O1xuICAgICAgY29udGFpbmVyRGVza3RvcC5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7XG4gICAgfVxuICAgIGNvbnN0IGxvYWRpbmdTcGlubmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAnLmZhY2V0cy1jb250YWluZXIgLmxvYWRpbmdfX3NwaW5uZXIsIGN1c3RvbS1mYWNldC1maWx0ZXJzLWZvcm0gLmxvYWRpbmdfX3NwaW5uZXInLFxuICAgICk7XG4gICAgbG9hZGluZ1NwaW5uZXJzLmZvckVhY2goKHNwaW5uZXIpID0+IHNwaW5uZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJykpO1xuICB9XG5cbiAgc3RhdGljIHJlbmRlckZpbHRlcnMoaHRtbDogYW55LCBldmVudDogYW55KSB7XG4gICAgY29uc3QgcGFyc2VkSFRNTCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpO1xuICAgIGNvbnN0IGZhY2V0RGV0YWlsc0VsZW1lbnRzRnJvbUZldGNoID0gcGFyc2VkSFRNTC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgJyNGYWNldEZpbHRlcnNGb3JtIC5qcy1maWx0ZXIsICNGYWNldEZpbHRlcnNGb3JtTW9iaWxlIC5qcy1maWx0ZXIsICNGYWNldEZpbHRlcnNQaWxsc0Zvcm0gLmpzLWZpbHRlcicsXG4gICAgKTtcbiAgICBjb25zdCBmYWNldERldGFpbHNFbGVtZW50c0Zyb21Eb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgJyNGYWNldEZpbHRlcnNGb3JtIC5qcy1maWx0ZXIsICNGYWNldEZpbHRlcnNGb3JtTW9iaWxlIC5qcy1maWx0ZXIsICNGYWNldEZpbHRlcnNQaWxsc0Zvcm0gLmpzLWZpbHRlcicsXG4gICAgKTtcblxuICAgIC8vIFJlbW92ZSBmYWNldHMgdGhhdCBhcmUgbm8gbG9uZ2VyIHJldHVybmVkIGZyb20gdGhlIHNlcnZlclxuICAgIEFycmF5LmZyb20oZmFjZXREZXRhaWxzRWxlbWVudHNGcm9tRG9tKS5mb3JFYWNoKChjdXJyZW50RWxlbWVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhQXJyYXkuZnJvbShmYWNldERldGFpbHNFbGVtZW50c0Zyb21GZXRjaCkuc29tZShcbiAgICAgICAgICAoeyBpZCB9KSA9PiBjdXJyZW50RWxlbWVudC5pZCA9PT0gaWQsXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjdXJyZW50RWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IG1hdGNoZXNJZCA9IChlbGVtZW50OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGpzRmlsdGVyID0gZXZlbnQgPyBldmVudC50YXJnZXQuY2xvc2VzdCgnLmpzLWZpbHRlcicpIDogdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIGpzRmlsdGVyID8gZWxlbWVudC5pZCA9PT0ganNGaWx0ZXIuaWQgOiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3QgZmFjZXRzVG9SZW5kZXIgPSBBcnJheS5mcm9tKGZhY2V0RGV0YWlsc0VsZW1lbnRzRnJvbUZldGNoKS5maWx0ZXIoXG4gICAgICAoZWxlbWVudCkgPT4gIW1hdGNoZXNJZChlbGVtZW50KSxcbiAgICApO1xuICAgIGNvbnN0IGNvdW50c1RvUmVuZGVyID0gQXJyYXkuZnJvbShmYWNldERldGFpbHNFbGVtZW50c0Zyb21GZXRjaCkuZmluZChcbiAgICAgIG1hdGNoZXNJZCxcbiAgICApO1xuXG4gICAgZmFjZXRzVG9SZW5kZXIuZm9yRWFjaCgoZWxlbWVudFRvUmVuZGVyLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9SZW5kZXIuaWQpO1xuICAgICAgLy8gRWxlbWVudCBhbHJlYWR5IHJlbmRlcmVkIGluIHRoZSBET00gc28ganVzdCB1cGRhdGUgdGhlIGlubmVySFRNTFxuICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRUb1VwZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb1JlbmRlci5pZCk7XG4gICAgICAgIGlmIChlbGVtZW50VG9VcGRhdGUpIHtcbiAgICAgICAgICBlbGVtZW50VG9VcGRhdGUuaW5uZXJIVE1MID0gZWxlbWVudFRvUmVuZGVyLmlubmVySFRNTDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBwcmV2aW91c0VsZW1lbnRDbGFzc05hbWUsIGlkOiBwcmV2aW91c0VsZW1lbnRJZCB9ID1cbiAgICAgICAgICAgIGZhY2V0c1RvUmVuZGVyW2luZGV4IC0gMV07XG4gICAgICAgICAgLy8gU2FtZSBmYWNldCB0eXBlIChlZyBob3Jpem9udGFsL3ZlcnRpY2FsIG9yIGRyYXdlci9tb2JpbGUpXG4gICAgICAgICAgaWYgKGVsZW1lbnRUb1JlbmRlci5jbGFzc05hbWUgPT09IHByZXZpb3VzRWxlbWVudENsYXNzTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlvdXNFbGVtZW50SWQpO1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzRWxlbWVudCkge1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQuYWZ0ZXIoZWxlbWVudFRvUmVuZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWxlbWVudFRvUmVuZGVyLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7ZWxlbWVudFRvUmVuZGVyLnBhcmVudEVsZW1lbnQuaWR9IC5qcy1maWx0ZXJgKTtcbiAgICAgICAgICBpZiAocGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudC5iZWZvcmUoZWxlbWVudFRvUmVuZGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIEZhY2V0RmlsdGVyc0Zvcm0ucmVuZGVyQWN0aXZlRmFjZXRzKHBhcnNlZEhUTUwpO1xuICAgIEZhY2V0RmlsdGVyc0Zvcm0ucmVuZGVyQWRkaXRpb25hbEVsZW1lbnRzKHBhcnNlZEhUTUwpO1xuXG4gICAgaWYgKGNvdW50c1RvUmVuZGVyKSB7XG4gICAgICBjb25zdCBjbG9zZXN0SlNGaWx0ZXJJRCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuanMtZmlsdGVyJykuaWQ7XG5cbiAgICAgIGlmIChjbG9zZXN0SlNGaWx0ZXJJRCkge1xuICAgICAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlckNvdW50cyhcbiAgICAgICAgICBjb3VudHNUb1JlbmRlcixcbiAgICAgICAgICBldmVudC50YXJnZXQuY2xvc2VzdCgnLmpzLWZpbHRlcicpLFxuICAgICAgICApO1xuICAgICAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlck1vYmlsZUNvdW50cyhcbiAgICAgICAgICBjb3VudHNUb1JlbmRlcixcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjbG9zZXN0SlNGaWx0ZXJJRCksXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgbmV3RmFjZXREZXRhaWxzRWxlbWVudCA9XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2xvc2VzdEpTRmlsdGVySUQpO1xuICAgICAgICBjb25zdCBuZXdFbGVtZW50U2VsZWN0b3IgPSBuZXdGYWNldERldGFpbHNFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgICAgICAgJ21vYmlsZS1mYWNldHNfX2RldGFpbHMnLFxuICAgICAgICApXG4gICAgICAgICAgPyBgLm1vYmlsZS1mYWNldHNfX2Nsb3NlLWJ1dHRvbmBcbiAgICAgICAgICA6IGAuZmFjZXRzX19zdW1tYXJ5YDtcbiAgICAgICAgY29uc3QgbmV3RWxlbWVudFRvQWN0aXZhdGU6IEhUTUxFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZCA9XG4gICAgICAgICAgbmV3RmFjZXREZXRhaWxzRWxlbWVudD8ucXVlcnlTZWxlY3RvcihuZXdFbGVtZW50U2VsZWN0b3IpO1xuXG4gICAgICAgIGNvbnN0IGlzVGV4dElucHV0ID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dCc7XG5cbiAgICAgICAgaWYgKG5ld0VsZW1lbnRUb0FjdGl2YXRlICYmICFpc1RleHRJbnB1dCkgbmV3RWxlbWVudFRvQWN0aXZhdGUuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcmVuZGVyQWN0aXZlRmFjZXRzKGh0bWw6IGFueSkge1xuICAgIGNvbnN0IGFjdGl2ZUZhY2V0RWxlbWVudFNlbGVjdG9ycyA9IFtcbiAgICAgICcuYWN0aXZlLWZhY2V0cy1tb2JpbGUnLFxuICAgICAgJy5hY3RpdmUtZmFjZXRzLWRlc2t0b3AnLFxuICAgIF07XG5cbiAgICBhY3RpdmVGYWNldEVsZW1lbnRTZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUZhY2V0c0VsZW1lbnQgPSBodG1sLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgaWYgKCFhY3RpdmVGYWNldHNFbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xuICAgICAgICB0YXJnZXRFbGVtZW50LmlubmVySFRNTCA9IGFjdGl2ZUZhY2V0c0VsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgRmFjZXRGaWx0ZXJzRm9ybS50b2dnbGVBY3RpdmVGYWNldHMoZmFsc2UpO1xuICB9XG5cbiAgc3RhdGljIHJlbmRlckFkZGl0aW9uYWxFbGVtZW50cyhodG1sOiBhbnkpIHtcbiAgICBjb25zdCBtb2JpbGVFbGVtZW50U2VsZWN0b3JzID0gW1xuICAgICAgJy5tb2JpbGUtZmFjZXRzX19vcGVuJyxcbiAgICAgICcubW9iaWxlLWZhY2V0c19fY291bnQnLFxuICAgICAgJy5zb3J0aW5nJyxcbiAgICBdO1xuXG4gICAgbW9iaWxlRWxlbWVudFNlbGVjdG9ycy5mb3JFYWNoKChzZWxlY3RvcikgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgY29uc3Qgc291cmNlRWxlbWVudCA9IGh0bWwucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICBpZiAodGFyZ2V0RWxlbWVudCAmJiBzb3VyY2VFbGVtZW50KSB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQuaW5uZXJIVE1MID0gc291cmNlRWxlbWVudC5pbm5lckhUTUw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgbWVudURyYXdlckVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLmdldEVsZW1lbnRCeUlkKCdGYWNldEZpbHRlcnNGb3JtTW9iaWxlJylcbiAgICAgID8uY2xvc2VzdCgnbWVudS1kcmF3ZXInKSBhcyBhbnk7XG4gICAgbWVudURyYXdlckVsZW1lbnQ/LmJpbmRFdmVudHMoKTtcbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJDb3VudHMoc291cmNlOiBhbnksIHRhcmdldDogYW55KSB7XG4gICAgY29uc3QgdGFyZ2V0U3VtbWFyeSA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuZmFjZXRzX19zdW1tYXJ5Jyk7XG4gICAgY29uc3Qgc291cmNlU3VtbWFyeSA9IHNvdXJjZS5xdWVyeVNlbGVjdG9yKCcuZmFjZXRzX19zdW1tYXJ5Jyk7XG5cbiAgICBpZiAoc291cmNlU3VtbWFyeSAmJiB0YXJnZXRTdW1tYXJ5KSB7XG4gICAgICB0YXJnZXRTdW1tYXJ5Lm91dGVySFRNTCA9IHNvdXJjZVN1bW1hcnkub3V0ZXJIVE1MO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldEhlYWRlckVsZW1lbnQgPSB0YXJnZXQucXVlcnlTZWxlY3RvcignLmZhY2V0c19faGVhZGVyJyk7XG4gICAgY29uc3Qgc291cmNlSGVhZGVyRWxlbWVudCA9IHNvdXJjZS5xdWVyeVNlbGVjdG9yKCcuZmFjZXRzX19oZWFkZXInKTtcblxuICAgIGlmIChzb3VyY2VIZWFkZXJFbGVtZW50ICYmIHRhcmdldEhlYWRlckVsZW1lbnQpIHtcbiAgICAgIHRhcmdldEhlYWRlckVsZW1lbnQub3V0ZXJIVE1MID0gc291cmNlSGVhZGVyRWxlbWVudC5vdXRlckhUTUw7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0V3JhcEVsZW1lbnQgPSB0YXJnZXQucXVlcnlTZWxlY3RvcignLmZhY2V0cy13cmFwJyk7XG4gICAgY29uc3Qgc291cmNlV3JhcEVsZW1lbnQgPSBzb3VyY2UucXVlcnlTZWxlY3RvcignLmZhY2V0cy13cmFwJyk7XG5cbiAgICBpZiAoc291cmNlV3JhcEVsZW1lbnQgJiYgdGFyZ2V0V3JhcEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGlzU2hvd2luZ01vcmUgPSBCb29sZWFuKFxuICAgICAgICB0YXJnZXQucXVlcnlTZWxlY3Rvcignc2hvdy1tb3JlLWJ1dHRvbiAubGFiZWwtc2hvdy1tb3JlLmhpZGRlbicpLFxuICAgICAgKTtcbiAgICAgIGlmIChpc1Nob3dpbmdNb3JlKSB7XG4gICAgICAgIHNvdXJjZVdyYXBFbGVtZW50XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mYWNldHNfX2l0ZW0uaGlkZGVuJylcbiAgICAgICAgICAuZm9yRWFjaCgoaGlkZGVuSXRlbTogYW55KSA9PlxuICAgICAgICAgICAgaGlkZGVuSXRlbS5jbGFzc0xpc3QucmVwbGFjZSgnaGlkZGVuJywgJ3Nob3ctbW9yZS1pdGVtJyksXG4gICAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0V3JhcEVsZW1lbnQub3V0ZXJIVE1MID0gc291cmNlV3JhcEVsZW1lbnQub3V0ZXJIVE1MO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJNb2JpbGVDb3VudHMoc291cmNlOiBhbnksIHRhcmdldDogYW55KSB7XG4gICAgY29uc3QgdGFyZ2V0RmFjZXRzTGlzdCA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKCcubW9iaWxlLWZhY2V0c19fbGlzdCcpO1xuICAgIGNvbnN0IHNvdXJjZUZhY2V0c0xpc3QgPSBzb3VyY2UucXVlcnlTZWxlY3RvcignLm1vYmlsZS1mYWNldHNfX2xpc3QnKTtcblxuICAgIGlmIChzb3VyY2VGYWNldHNMaXN0ICYmIHRhcmdldEZhY2V0c0xpc3QpIHtcbiAgICAgIHRhcmdldEZhY2V0c0xpc3Qub3V0ZXJIVE1MID0gc291cmNlRmFjZXRzTGlzdC5vdXRlckhUTUw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZVVSTEhhc2goc2VhcmNoUGFyYW1zOiBhbnkpIHtcbiAgICBoaXN0b3J5LnB1c2hTdGF0ZShcbiAgICAgIHsgc2VhcmNoUGFyYW1zIH0sXG4gICAgICAnJyxcbiAgICAgIGAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX0ke3NlYXJjaFBhcmFtcyAmJiAnPycuY29uY2F0KHNlYXJjaFBhcmFtcyl9YCxcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGdldFNlY3Rpb25zKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHNlY3Rpb246IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9kdWN0LWdyaWQnKT8uZGF0YXNldC5pZCxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxuXG4gIGNyZWF0ZVNlYXJjaFBhcmFtcyhmb3JtOiBhbnkpIHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcbiAgICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyhmb3JtRGF0YSBhcyBhbnkpLnRvU3RyaW5nKCk7XG4gIH1cblxuICBvblN1Ym1pdEZvcm0oc2VhcmNoUGFyYW1zOiBhbnksIGV2ZW50OiBhbnkpIHtcbiAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlclBhZ2Uoc2VhcmNoUGFyYW1zLCBldmVudCk7XG4gIH1cblxuICBvblN1Ym1pdEhhbmRsZXIoZXZlbnQ6IGFueSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3Qgc29ydEZpbHRlckZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICdjdXN0b20tZmFjZXQtZmlsdGVycy1mb3JtIGZvcm0nLFxuICAgICk7XG4gICAgaWYgKGV2ZW50LnNyY0VsZW1lbnQuY2xhc3NOYW1lID09ICdtb2JpbGUtZmFjZXRzX19jaGVja2JveCcpIHtcbiAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHRoaXMuY3JlYXRlU2VhcmNoUGFyYW1zKFxuICAgICAgICBldmVudC50YXJnZXQuY2xvc2VzdCgnZm9ybScpLFxuICAgICAgKTtcbiAgICAgIHRoaXMub25TdWJtaXRGb3JtKHNlYXJjaFBhcmFtcywgZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmb3JtczogYW55W10gPSBbXTtcbiAgICAgIGNvbnN0IGlzTW9iaWxlID1cbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5pZCA9PT0gJ0ZhY2V0RmlsdGVyc0Zvcm1Nb2JpbGUnO1xuXG4gICAgICBzb3J0RmlsdGVyRm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xuICAgICAgICBpZiAoIWlzTW9iaWxlKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZm9ybS5pZCA9PT0gJ0ZhY2V0U29ydEZvcm0nIHx8XG4gICAgICAgICAgICBmb3JtLmlkID09PSAnRmFjZXRGaWx0ZXJzRm9ybScgfHxcbiAgICAgICAgICAgIGZvcm0uaWQgPT09ICdGYWNldFNvcnREcmF3ZXJGb3JtJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgZm9ybXMucHVzaCh0aGlzLmNyZWF0ZVNlYXJjaFBhcmFtcyhmb3JtKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGZvcm0uaWQgPT09ICdGYWNldEZpbHRlcnNGb3JtTW9iaWxlJykge1xuICAgICAgICAgIGZvcm1zLnB1c2godGhpcy5jcmVhdGVTZWFyY2hQYXJhbXMoZm9ybSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMub25TdWJtaXRGb3JtKGZvcm1zLmpvaW4oJyYnKSwgZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIG9uQWN0aXZlRmlsdGVyQ2xpY2soZXZlbnQ6IGFueSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgRmFjZXRGaWx0ZXJzRm9ybS50b2dnbGVBY3RpdmVGYWNldHMoKTtcbiAgICBjb25zdCB1cmwgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5ocmVmLmluZGV4T2YoJz8nKSA9PSAtMVxuICAgICAgICA/ICcnXG4gICAgICAgIDogZXZlbnQuY3VycmVudFRhcmdldC5ocmVmLnNsaWNlKFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5ocmVmLmluZGV4T2YoJz8nKSArIDEsXG4gICAgICAgICAgKTtcbiAgICBGYWNldEZpbHRlcnNGb3JtLnJlbmRlclBhZ2UodXJsKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBBZGFwdGVkIGZyb20gZmFjZXRzLmpzXG4gKi9cbmV4cG9ydCBjbGFzcyBQcmljZVJhbmdlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3QgcmFuZ2VJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgJy5wcmljZV9yYW5nX3NsaWRlciBpbnB1dFt0eXBlPVwicmFuZ2VcIl0nLFxuICAgICk7XG4gICAgY29uc3QgcmFuZ2UxID0gcmFuZ2VJbnB1dHNbMF07XG4gICAgY29uc3QgcmFuZ2UyID0gcmFuZ2VJbnB1dHNbMV07XG5cbiAgICBmdW5jdGlvbiBmb3JtYXRNb25leShhbW91bnQ6IG51bWJlciwgY3VycmVuY3lTeW1ib2wgPSAnJCcpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZEFtb3VudCA9IChhbW91bnQgLyAxMDApLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHtcbiAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLFxuICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBgJHtjdXJyZW5jeVN5bWJvbH0ke2Zvcm1hdHRlZEFtb3VudH1gO1xuICAgIH1cblxuICAgIHJhbmdlMS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMudmFsdWUgPSBNYXRoLm1pbih0aGlzLnZhbHVlLCByYW5nZTIudmFsdWUgLSAxMCkudG9TdHJpbmcoKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMuY2xvc2VzdCgnLmZhY2V0c19fZGlzcGxheS12ZXJ0aWNhbCcpPy5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAnLnByaWNlX21pbl90ZXh0JyxcbiAgICAgICk/LmlubmVySFRNTCA9IGZvcm1hdE1vbmV5KE51bWJlcih0aGlzLnZhbHVlKSAqIDEwMCk7XG4gICAgICB1cGRhdGVTbGlkZXIoKTtcbiAgICB9KTtcblxuICAgIHJhbmdlMi5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMudmFsdWUgPSBNYXRoLm1heCh0aGlzLnZhbHVlLCBOdW1iZXIocmFuZ2UxLnZhbHVlKSAtIC0xMCkudG9TdHJpbmcoKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMuY2xvc2VzdCgnLmZhY2V0c19fZGlzcGxheS12ZXJ0aWNhbCcpPy5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAnLnByaWNlX21heF90ZXh0JyxcbiAgICAgICk/LmlubmVySFRNTCA9IGZvcm1hdE1vbmV5KE51bWJlcih0aGlzLnZhbHVlKSAqIDEwMCk7XG4gICAgICB1cGRhdGVTbGlkZXIoKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNsaWRlcigpIHtcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KCcuZmFjZXRzX19wcmljZSAuaW5wdXRfbWluJylcbiAgICAgICAgPy5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmFuZ2UxLnZhbHVlKTtcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KCcuZmFjZXRzX19wcmljZSAuaW5wdXRfbWF4JylcbiAgICAgICAgPy5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmFuZ2UyLnZhbHVlKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTbGlkZXIoKTtcblxuICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbDxIVE1MSW5wdXRFbGVtZW50PignaW5wdXQnKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25SYW5nZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duLmJpbmQodGhpcykpO1xuICAgIH0pO1xuICAgIHRoaXMuc2V0TWluQW5kTWF4VmFsdWVzKCk7XG4gIH1cblxuICBvblJhbmdlQ2hhbmdlKGV2ZW50OiBFdmVudCkge1xuICAgIHRoaXMuYWRqdXN0VG9WYWxpZFZhbHVlcyhldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpO1xuICAgIHRoaXMuc2V0TWluQW5kTWF4VmFsdWVzKCk7XG4gIH1cblxuICBvbktleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQubWV0YUtleSkgcmV0dXJuO1xuXG4gICAgY29uc3QgcGF0dGVybiA9XG4gICAgICAvWzAtOV18XFwufCx8J3wgfFRhYnxCYWNrc3BhY2V8RW50ZXJ8QXJyb3dVcHxBcnJvd0Rvd258QXJyb3dMZWZ0fEFycm93UmlnaHR8RGVsZXRlfEVzY2FwZS87XG4gICAgaWYgKCFldmVudC5rZXkubWF0Y2gocGF0dGVybikpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBzZXRNaW5BbmRNYXhWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dCcpO1xuICAgIGNvbnN0IG1pbklucHV0ID0gaW5wdXRzWzBdO1xuICAgIGNvbnN0IG1heElucHV0ID0gaW5wdXRzWzFdO1xuICAgIGlmIChtYXhJbnB1dC52YWx1ZSkgbWluSW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLW1heCcsIG1heElucHV0LnZhbHVlKTtcbiAgICBpZiAobWluSW5wdXQudmFsdWUpIG1heElucHV0LnNldEF0dHJpYnV0ZSgnZGF0YS1taW4nLCBtaW5JbnB1dC52YWx1ZSk7XG4gICAgaWYgKG1pbklucHV0LnZhbHVlID09PSAnJykgbWF4SW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLW1pbicsICcwJyk7XG4gICAgaWYgKG1heElucHV0LnZhbHVlID09PSAnJylcbiAgICAgIG1pbklucHV0LnNldEF0dHJpYnV0ZShcbiAgICAgICAgJ2RhdGEtbWF4JyxcbiAgICAgICAgbWluSW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLW1heCcpIHx8ICcnLFxuICAgICAgKTtcbiAgfVxuXG4gIGFkanVzdFRvVmFsaWRWYWx1ZXMoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSk7XG4gICAgY29uc3QgbWluID0gTnVtYmVyKGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1taW4nKSk7XG4gICAgY29uc3QgbWF4ID0gTnVtYmVyKGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1tYXgnKSk7XG5cbiAgICBpZiAodmFsdWUgPCBtaW4pIGlucHV0LnZhbHVlID0gbWluLnRvU3RyaW5nKCk7XG4gICAgaWYgKHZhbHVlID4gbWF4KSBpbnB1dC52YWx1ZSA9IG1heC50b1N0cmluZygpO1xuICB9XG59XG4iLCJcbi8qKlxuICogQWRhcHRlZCBmcm9tIGZhY2V0cy5qc1xuICovXG5leHBvcnQgY2xhc3MgRmFjZXRSZW1vdmUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgY29uc3QgZmFjZXRMaW5rID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdhJyk7XG4gICAgZmFjZXRMaW5rPy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgZmFjZXRMaW5rPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VGaWx0ZXIuYmluZCh0aGlzKSk7XG4gICAgZmFjZXRMaW5rPy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChldmVudC5jb2RlLnRvVXBwZXJDYXNlKCkgPT09ICdTUEFDRScpIHRoaXMuY2xvc2VGaWx0ZXIoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2VGaWx0ZXIoZXZlbnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtID1cbiAgICAgIHRoaXMuY2xvc2VzdCgnY3VzdG9tLWZhY2V0LWZpbHRlcnMtZm9ybScpIHx8XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjdXN0b20tZmFjZXQtZmlsdGVycy1mb3JtJyk7XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIChmb3JtIGFzIGFueSkub25BY3RpdmVGaWx0ZXJDbGljayhldmVudCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBGYWNldEZpbHRlcnNGb3JtIGFzIEN1c3RvbUZhY2V0RmlsdGVyc0Zvcm0gfSBmcm9tICcuL0ZhY2V0RmlsdGVyc0Zvcm0nO1xuaW1wb3J0IHsgUHJpY2VSYW5nZSBhcyBDdXN0b21QcmljZVJhbmdlIH0gZnJvbSAnLi9QcmljZVJhbmdlJztcbmltcG9ydCB7IEZhY2V0UmVtb3ZlIGFzIEN1c3RvbUZhY2V0UmVtb3ZlIH0gZnJvbSAnLi9GYWNldFJlbW92ZSc7XG5cbi8qKlxuICogQWRhcHRlZCBmcm9tIGZhY2V0cy5qc1xuICovXG5GYWNldEZpbHRlcnNGb3JtLmZpbHRlckRhdGEgPSBbXTtcbkZhY2V0RmlsdGVyc0Zvcm0uc2VhcmNoUGFyYW1zSW5pdGlhbCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc2xpY2UoMSk7XG5GYWNldEZpbHRlcnNGb3JtLnNlYXJjaFBhcmFtc1ByZXYgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpO1xuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdjdXN0b20tZmFjZXQtZmlsdGVycy1mb3JtJywgQ3VzdG9tRmFjZXRGaWx0ZXJzRm9ybSk7XG5DdXN0b21GYWNldEZpbHRlcnNGb3JtLnNldExpc3RlbmVycygpO1xuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2N1c3RvbS1wcmljZS1yYW5nZScsIEN1c3RvbVByaWNlUmFuZ2UpO1xuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdjdXN0b20tZmFjZXQtcmVtb3ZlJywgQ3VzdG9tRmFjZXRSZW1vdmUpO1xuIl0sIm5hbWVzIjpbIkhUTUxFbGVtZW50IiwiY29uc3RydWN0b3IiLCJzdXBlciIsInRoaXMiLCJvbkFjdGl2ZUZpbHRlckNsaWNrIiwiYmluZCIsImRlYm91bmNlZE9uU3VibWl0IiwiZGVib3VuY2UiLCJldmVudCIsIm9uU3VibWl0SGFuZGxlciIsImZhY2V0Rm9ybSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZmFjZXRXcmFwcGVyIiwib25LZXlVcEVzY2FwZSIsInNldExpc3RlbmVycyIsIndpbmRvdyIsInNlYXJjaFBhcmFtcyIsInN0YXRlIiwic2VhcmNoUGFyYW1zSW5pdGlhbCIsInNlYXJjaFBhcmFtc1ByZXYiLCJyZW5kZXJQYWdlIiwidG9nZ2xlQWN0aXZlRmFjZXRzIiwiZGlzYWJsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwidXBkYXRlVVJMSGFzaCIsInNlY3Rpb25zIiwiZ2V0U2VjdGlvbnMiLCJwcm9kdWN0R3JpZENvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiY29sbGVjdGlvbkVsZW1lbnQiLCJhZGQiLCJzZWN0aW9uIiwidXJsIiwibG9jYXRpb24iLCJwYXRobmFtZSIsImZpbHRlckRhdGFVcmwiLCJmaWx0ZXJEYXRhIiwic29tZSIsInJlbmRlclNlY3Rpb25Gcm9tQ2FjaGUiLCJyZW5kZXJTZWN0aW9uRnJvbUZldGNoIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJ0ZXh0IiwicmVzcG9uc2VUZXh0IiwiaHRtbCIsInJlbmRlckZpbHRlcnMiLCJyZW5kZXJQcm9kdWN0R3JpZENvbnRhaW5lciIsInJlbmRlclByb2R1Y3RDb3VudCIsImluaXRpYWxpemVTY3JvbGxBbmltYXRpb25UcmlnZ2VyIiwiaW5uZXJIVE1MIiwiZmluZCIsImdyaWRDb250YWluZXIiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJpdGVtIiwicHJvZHVjdENvbnRlbnQiLCJjbG9zZXN0IiwiY29udGFpbnMiLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmUiLCJjb3VudEVsZW1lbnQiLCJjb3VudCIsImNvbnRhaW5lciIsImNvbnRhaW5lckRlc2t0b3AiLCJzcGlubmVyIiwicGFyc2VkSFRNTCIsImZhY2V0RGV0YWlsc0VsZW1lbnRzRnJvbUZldGNoIiwiZmFjZXREZXRhaWxzRWxlbWVudHNGcm9tRG9tIiwiQXJyYXkiLCJmcm9tIiwiY3VycmVudEVsZW1lbnQiLCJpZCIsIm1hdGNoZXNJZCIsImpzRmlsdGVyIiwidGFyZ2V0IiwidW5kZWZpbmVkIiwiZmFjZXRzVG9SZW5kZXIiLCJmaWx0ZXIiLCJjb3VudHNUb1JlbmRlciIsImVsZW1lbnRUb1JlbmRlciIsImluZGV4IiwiZWxlbWVudFRvVXBkYXRlIiwiY2xhc3NOYW1lIiwicHJldmlvdXNFbGVtZW50Q2xhc3NOYW1lIiwicHJldmlvdXNFbGVtZW50SWQiLCJwcmV2aW91c0VsZW1lbnQiLCJhZnRlciIsInBhcmVudEVsZW1lbnQiLCJiZWZvcmUiLCJyZW5kZXJBY3RpdmVGYWNldHMiLCJyZW5kZXJBZGRpdGlvbmFsRWxlbWVudHMiLCJjbG9zZXN0SlNGaWx0ZXJJRCIsInJlbmRlckNvdW50cyIsInJlbmRlck1vYmlsZUNvdW50cyIsIm5ld0ZhY2V0RGV0YWlsc0VsZW1lbnQiLCJuZXdFbGVtZW50U2VsZWN0b3IiLCJuZXdFbGVtZW50VG9BY3RpdmF0ZSIsImlzVGV4dElucHV0IiwiZ2V0QXR0cmlidXRlIiwiZm9jdXMiLCJzZWxlY3RvciIsImFjdGl2ZUZhY2V0c0VsZW1lbnQiLCJ0YXJnZXRFbGVtZW50Iiwic291cmNlRWxlbWVudCIsIm1lbnVEcmF3ZXJFbGVtZW50IiwiYmluZEV2ZW50cyIsInNvdXJjZSIsInRhcmdldFN1bW1hcnkiLCJzb3VyY2VTdW1tYXJ5Iiwib3V0ZXJIVE1MIiwidGFyZ2V0SGVhZGVyRWxlbWVudCIsInNvdXJjZUhlYWRlckVsZW1lbnQiLCJ0YXJnZXRXcmFwRWxlbWVudCIsInNvdXJjZVdyYXBFbGVtZW50IiwiQm9vbGVhbiIsImhpZGRlbkl0ZW0iLCJyZXBsYWNlIiwidGFyZ2V0RmFjZXRzTGlzdCIsInNvdXJjZUZhY2V0c0xpc3QiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiY29uY2F0IiwiZGF0YXNldCIsImNyZWF0ZVNlYXJjaFBhcmFtcyIsImZvcm0iLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiVVJMU2VhcmNoUGFyYW1zIiwidG9TdHJpbmciLCJvblN1Ym1pdEZvcm0iLCJwcmV2ZW50RGVmYXVsdCIsInNvcnRGaWx0ZXJGb3JtcyIsInNyY0VsZW1lbnQiLCJmb3JtcyIsImlzTW9iaWxlIiwicHVzaCIsImpvaW4iLCJjdXJyZW50VGFyZ2V0IiwiaHJlZiIsImluZGV4T2YiLCJzbGljZSIsIlByaWNlUmFuZ2UiLCJyYW5nZUlucHV0cyIsInJhbmdlMSIsInJhbmdlMiIsImZvcm1hdE1vbmV5IiwiYW1vdW50IiwiY3VycmVuY3lTeW1ib2wiLCJ0b0xvY2FsZVN0cmluZyIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsIm1heGltdW1GcmFjdGlvbkRpZ2l0cyIsInVwZGF0ZVNsaWRlciIsInNldEF0dHJpYnV0ZSIsInZhbHVlIiwiTWF0aCIsIm1pbiIsIk51bWJlciIsIm1heCIsIm9uUmFuZ2VDaGFuZ2UiLCJvbktleURvd24iLCJzZXRNaW5BbmRNYXhWYWx1ZXMiLCJhZGp1c3RUb1ZhbGlkVmFsdWVzIiwibWV0YUtleSIsImtleSIsIm1hdGNoIiwiaW5wdXRzIiwibWluSW5wdXQiLCJtYXhJbnB1dCIsImlucHV0IiwiRmFjZXRSZW1vdmUiLCJmYWNldExpbmsiLCJjbG9zZUZpbHRlciIsImNvZGUiLCJ0b1VwcGVyQ2FzZSIsIkZhY2V0RmlsdGVyc0Zvcm0iLCJzZWFyY2giLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSJdLCJzb3VyY2VSb290IjoiIn0=